!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.pathRouter=e()}(this,function(){function t(t){return t.slice("/"===t[0]?1:void 0,"/"===t[t.length-1]?-1:void 0)}var e=new RegExp("((?:[\\w\\!\\$&'\\(\\)\\*\\+\\,;\\=\\:@\\-\\.~]|%[A-F0-9]{2})+)|(?:\\{(\\w+)(?:(\\*))?(\\?)?\\})","g");function r(t,e){if(!t.key||!e.key)return t.key?1:-1;if(t.wildcard&&e.wildcard)throw new Error("Route conflict wildcards: "+t.segment+" "+e.segment);return t.wildcard||e.wildcard?t.wildcard?1:-1:void 0}function n(n,o,a){var i=function(r){var n=[];return t(r).replace(e,function(t,e,r,o,a){n.push({segment:t,literal:e,key:r,isOptional:Boolean(a),isWildcard:Boolean(o)})}),n}(n);t:for(var l=0,d=a;l<i.length;++l){var c=l===i.length-1,s=i[l];s.children=[],s.literal=s.literal&&s.literal.toLowerCase();for(var u=0;u<d.children.length;++u){var f=d.children[u];if(f.segment===s.segment){if(c){if(f.data)throw new Error("Path conflict: "+n+" segment: "+s.segment);f.data=o;break}d=f;continue t}}if(s.isOptional&&c){if(null!=d.data)throw new Error("Path conflict: "+n+" segment: "+s.segment);d.data=o}c&&(s.data=o),d.children.push(s),d.children.sort(r),d=s}}function o(e,r){var n=t(e).split("/"),o=n.length-1,a={},i=null,l=r;t:for(var d=0;d<n.length;++d){for(var c=n[d],s=0;s<l.children.length;++s){var u=l.children[s];if(!u.key&&u.literal===c.toLowerCase()){l=u;continue t}if(u.key&&!u.isWildcard){a[u.key]=c,l=u;continue t}if(u.isWildcard){a[u.key]=n.splice(d,o),l=u;break}}i=n.slice(d,n.length).join("/");break}return{params:a,unmatched:i,node:l===r?null:l}}var a=function(t){void 0===t&&(t={});var e=t.routes;if(this.root={segment:"/",children:[],data:null},e)for(var r=0,n=e;r<n.length;r+=1){var o=n[r];this.set(o.path,o.data)}};return a.prototype.set=function(t,e){if("/"===t){if(this.root.data)throw new Error('Route "/" already set.');this.root.data=e}else n(t,e,this.root)},a.prototype.get=function(t){if("/"===t)return this.root;var e=o(t,this.root).node;return this.root===e?null:e},a.prototype.match=function(t){if("/"===t)return{params:{},data:this.root.data,unmatched:null};var e=o(t,this.root);return{params:e.params,unmatched:e.unmatched,data:e.node?e.node.data:null}},a});
//# sourceMappingURL=index.umd.js.map
